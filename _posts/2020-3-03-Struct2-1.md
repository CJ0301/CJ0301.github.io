---
layout: 		post
title: 			"SSHæ¡†æ¶"
subtitle: 		'struts2'
author: 		"CJ"
header-img: 	"img/post-bg-javaweb.jpg"
outer-img:		"post-bg-javaweb.jpg"
header-mask: 	0.3
catalog: 		true
tags:
  - Java Web
---

## åˆå…¥struts2

#### åˆ›å»ºé¡¹ç›®
![åˆ›å»ºé¡¹ç›®](/img/in-posts/20200303_strut_1.png)

![é¡¹ç›®ç»“æ„](/img/in-posts/20200303_strut_2.png)

![æ·»åŠ ä¾èµ–](/img/in-posts/20200303_strut_3.png)

#### ä¸¾ä¸ªğŸŒ°
![ç™»é™†æ¡ˆä¾‹](/img/in-posts/20200303_strut_4.png)

HelloAction.java
```java
package com.zte.action;

import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionSupport;
import com.zte.bean.User;

public class HelloAction extends ActionSupport {
    private User user;

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public String execute() throws Exception{
        ActionContext context = ActionContext.getContext();
        if(user.getUserName().equals("admin")&&user.getPassword().equals("123")){
            context.put("UserName",user.getUserName());
            context.put("password",user.getPassword());
            return "SUCCESS";
        }
        return "FALSE";
    }
}

```

User.java
```java
package com.zte.bean;

public class User {
    private String UserName;
    private String password;

    public String getUserName() {
        return UserName;
    }

    public void setUserName(String userName) {
        UserName = userName;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }
}

```

struts.xml
```xml
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
    <package name="default" extends="struts-default">
        <action name="loginAction" class="com.zte.action.HelloAction" method="execute">
            <result name="SUCCESS">/success.jsp</result>
            <result name="FALSE">/error.jsp</result>
        </action>
    </package>
</struts>
```

error.jsp
```html
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>
    <title>Title</title>
</head>
<body>
é”™è¯¯<a href="login.jsp">ç‚¹å‡»å›ç™»é™†é¡µé¢</a>
</body>
</html>
```

success.jsp
```html
<html>
<head>
    <title>Title</title>
</head>
<body>
ç”¨æˆ·åï¼š${UserName}
å¯†ç ï¼š${password}
</body>
</html>
```

login.jsp
```html
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
  <head>
    <title>$Title$</title>
  </head>
  <body>
    <form action="loginAction" method="post">
      ç”¨æˆ·åï¼š<input type="text" name="user.UserName"><br>
      å¯†ç ï¼š<input type="password" name="user.password"><br>
      <input type="submit" value="æäº¤">
    </form>
  </body>
</html>
```

è¯¥æ¡ˆä¾‹çš„æ‰§è¡Œæµç¨‹ä¸ºç”¨æˆ·è¿›å…¥loginé¡µé¢,ç„¶åç”±web.xmlæ‹¦æˆªè¯·æ±‚è½¬å‘åˆ°å¯¹åº”çš„Actionç±»å¤„ç†,å†æ ¹æ®é…ç½®,è°ƒç”¨Actionç±»ä¸­çš„ç›¸åº”æ–¹æ³•,å¹¶è¿”å›ç»“æœç›¸åº”çš„é¡µé¢ã€‚

Notes:
1. Actionç±»éœ€è¦ç»§æ‰¿Struts2æ¡†æ¶æä¾›çš„ActionSupportç±»,ç±»ä¸­è¦æœ‰å¤„ç†æ–¹æ³•ä¸”æ»¡è¶³1.æ–¹æ³•æƒé™ä¿®é¥°ç¬¦ä¸ºpublic2.è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²3.æ–¹æ³•ä¸èƒ½æœ‰å‚æ•°ã€‚
2. struts.xmlä¸­,packageæ ‡ç­¾è¡¨ç¤ºåŒ…nameè¡¨ç¤ºåŒ…å,åŒ…åä½ç§»,extendsè¡¨ç¤ºç»§æ‰¿ã€‚å›ºå®šç»§æ‰¿struts-defaultã€‚actionæ ‡ç­¾è¡¨ç¤ºåŠ¨ä½œ,nameç›¸å½“äºServletçš„æ˜ å°„è·¯å¾„,classä¸ºç”¨äºå¤„ç†è¯·æ±‚çš„ç±»,ç›¸å½“äºServlet,methodä¸ºå¤„ç†æ–¹æ³•,resultä¸ºç»“æœ,è¿”å›ç›¸åº”çš„JSPé¡µé¢ã€‚
3. å†actionå’Œresultæ ‡ç­¾ä¸­å¯ä½¿ç”¨é€šé…ç¬¦,ä¾‹å¦‚<action name="index_*" method="{1}">,åˆ™methodçš„å€¼æ ¹æ®*å·å¤„ç†ã€‚
4. ActionContextç±»ç”¨äºè®¿é—®Servlet API,ç”¨é”®å€¼å¯¹å­˜å‚¨æ•°æ®,å¯ä»¥å°†æ•°æ®æä¾›ç»™JSPé¡µé¢

## æ‹¦æˆªå™¨
#### æ‹¦æˆªå™¨çš„é…ç½®
åœ¨struts.xmlä¸­é…ç½®,æ ‡ç­¾åä¸ºinterceptor,nameæŒ‡å®šåç§°,classæŒ‡å®šå¤„ç†ç±»,éœ€è¦ä¼ å…¥å‚æ•°æ—¶å®šä¹‰paramå­æ ‡ç­¾

#### æ‹¦æˆªå™¨æ ˆ
ä½¿ç”¨<interceptors>æ ‡ç­¾å’Œ<interceptor>å­æ ‡ç­¾,é…ç½®æ—¶éœ€è¦ä½¿ç”¨<interceptor-ref>æ ‡ç­¾æ¥æŒ‡å®šå¤šä¸ªæ‹¦æˆªå™¨