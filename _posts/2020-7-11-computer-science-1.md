---
layout: 		post
title: 			"计算机基础-1"
subtitle: 		'补一下基础知识'
author: 		"CJ"
header-img: 	"img/post-bg-android.jpg"
outer-img:		"post-bg-android.jpg"
header-mask: 	0.3
catalog: 		true
tags:
  - Computer Science
---
## 计算机基础
#### 硬件
冯诺依曼架构是现代计算机的硬件体系架构，它包括五大硬件单元：  
- 运算器  
- 控制器  
- 存储器  
- 输入设备  
- 输出设备  

其中运算器和控制器组成中央处理器，也叫CPU。

控制器（Control Unit，CU）是计算机系统的神经中枢和指挥中心，用于控制、指挥计算机系统的各个部分协调工作。其基本功能是从内存中取出指令，对指令进行分析，然后根据该指令的功能向有关部件发出控制命令，以完成该指令所规定的任务。
控制器主要由程序计数器、指令寄存器、指令译码器、操作控制电路和时序控制电路等组成，它们的主要功能是：  
⑴ 程序计数器（Programe Counter，PC）：用来对程序中的指令进行计数，使控制器能够按照一定的顺序依次读取指令。  
⑵ 指令寄存器（Injunction Register，IR）：保存从内存中读取出来的指令。  
⑶ 指令译码器（Injunction Encoder，IE）：用于识别、分析指令的功能，确定指令的操作要求。  
⑷ 操作控制电路：根据指令译码，产生各种控制操作命令。  
⑸ 时序控制电路：生成脉冲时序信号，以协调、控制计算机各部件的工作。  

运算器（Arithmetic and Logic Unit，ALU）又称算术逻辑单元，是对信息进行加工处理的部件，主要由算术逻辑运算器、累加器、寄存器等组成。运算器的功能是在控制器的控制下，对取自内存或者寄存器的二进制数据进行各种加工处理，包括加、减、乘、除等算术运算和与、或、非、比较等逻辑运算后，再将运算结果暂存在寄存器或送到内存中保存。控制器和运算器组成中央处理单元 CPU（Central Processing Unit）。有如下几个部件：    
⑴ 算数逻辑单元ALU：数据的算术运算和逻辑运算。    
⑵ 累加寄存器AC：通用寄存器，为ALU提供一个工作区，用在暂存数据。    
⑶ 数据缓冲寄存器DR：写内存时，暂存指令或数据。    
⑷ 状态条件寄存器PSW：存状态标志与控制标志。（存在争议，也有将其归为控制器）

存储器（Memory）是具有记忆能力的电子装置或机电设备。使用时，可以从存储器中取出数据并且不影响原有数据，这种操作称为读出操作；也可以将数据保存到存储器中而替换原有内容，此种操作称为写入操作。根据作用和功能的不同，存储器通常分为内存储器和外存储器两大类。  
(1) 内存储器  
内存储器又称主存储器（Main Memory），其主要功能是存放 CPU 要执行的程序、要处理的原始数据、处理后的中间结果和最终结果。内存储器的特点是工作速度快、容量较小、价格较高。根据信息保存和工作特点的不同，内存储器又分为三类：  
① 只读存储器（Read Only Memory，ROM）  
ROM 中的数据在制作时或者安装前已经写入并固定在里面，只能读出，一般不能改变（写入），断电也不会丢失。通常用于存放不需要经常改变的程序或数据。  
② 随机存取存储器（Random Access Memory，RAM）  
RAM 中的数据可以根据需要随意地写入或读出，但只要一断电，其中保存的所有数据就会丢失，主要用于存放要执行的程序和需要加工处理的数据。冯·诺依曼体系结构计算机的重要设计思想之一就是程序和数据都必须存放到内存储器中才能被 CPU 执行和加工处理。  
③ 高速缓冲存储器（Cache）  
Cache 是介于 CPU 和内存之间的一种可以高速存取信息的存储器芯片，是 CPU 和内存之间交换信息的桥梁，用于解决 CPU 和内存之间工作速度的冲突问题，以提高整个系统的工作效率。  
CPU 和内存储器构成计算机的主机。  
(2) 外存储器  
外存储器又称辅助存储器（Auxiliary Memory），是内存储器的补充和后援，主要用于存放计算机当前不处理的程序和大量的数据。保存在外存储器中的程序和数据只在需要时，才会调入到内存中。外存储器不与计算机系统的其它部件直接交换数据，只和内存交换数据，并且不是按单个数据进行存取，而是成批地进行数据交换。外存储器容量大，保存的程序和数据在断电后也不会丢失，弥补了内存储器 RAM 的容量小，断电会丢失数据的缺陷。常用的外存储器主要有软／硬磁盘、光盘、磁带、闪存盘等。外存储器的特点是容量很大，信息可长期保存，但数据的读／写速度较慢。

体系结构  
<table>
	<tr>
		<td>体系结构类型</td>
		<td>结构</td>
		<td>关键特性</td>
		<td>代表</td>
	</tr>
	<tr>
		<td>单指令流单数据流SISD</td>
		<td>控制部分：一个<br>处理器：一个<br>主存模块：一个</td>
		<td></td>
		<td>单处理器系统</td>
	</tr>
	<tr>
		<td>单指令流多数据流SIMD</td>
		<td>控制部分：一个<br>处理器：多个<br>主存模块：多个</td>
		<td>各处理器以异步的形式执行同一条指令</td>
		<td>并行处理器<br>阵列处理器<br>超级向量处理器</td>
	</tr>
	<tr>
		<td>多指令流单数据流MISD</td>
		<td>控制部分：多个<br>处理器：一个<br>主存模块：多个</td>
		<td>不实际</td>
		<td>目前没有，有文献称流水线计算机为此类</td>
	</tr>
	<tr>
		<td>多指令流多数据流MIMD</td>
		<td>控制部分：多个<br>处理器：多个<br>主存模块：多个</td>
		<td>能够实现作业、任务、指令等各级全面并行</td>
		<td>多处理器系统，多计算机</td>
	</tr>
</table>

指令  
一条指令就是机器语言的一个语句，它是一组有意义的二进制代码，由操作码字段与地址码字段组成。

操作码部分指定计算机执行的操作，地址码字段需包含操作数的地址及操作结果的存放地址，可分为三地址指令、二地址指令、一地址指令和零地址指令。

寻址方式  
立即寻址：操作数直接在指令中，速度快，灵活性差。  
直接寻址：指令中存放的是操作数的地址。  
间接寻址：指令中存放一个地址，地址对应的内容是操作数的地址。  
寄存器寻址：寄存器存放操作数。  
寄存器间接寻址：寄存器存放的是操作数的地址。

CISC与RISC  
<table>
	<tr>
		<td>指令系统类型</td>
		<td>指令</td>
		<td>寻址方式</td>
		<td>实现方法</td>
		<td>其他</td>
	</tr>
	<tr>
		<td>CISC(复杂)</td>
		<td>数量多，使用频率差别大，可变长格式</td>
		<td>支持多种</td>
		<td>微程序控制技术</td>
		<td>研发周期长</td>
	</tr>
	<tr>
		<td>RISC(精简)</td>
		<td>数量少，使用频率接近，定长格式，大部分为单周期指令，操作寄存器，只有Load/Store操作内存</td>
		<td>支持方式少</td>
		<td>增加了通用寄存器；硬布线逻辑控制为主，适合流水线</td>
		<td>优化编译，有效支持高级语言</td>
	</tr>
</table>

流水线  
相关参数计算：流水线执行时间计算、流水线吞吐率、流水线加速比、流水线效率。

流水线是指程序执行时多条指令重叠进行操作的一种准并行处理实现技术。各种部件同时处理是针对不同指令而言，它们可同时为多条指令的不同部分进行工作，以提高各部件的利用率和指令的平均执行速度。

流水线计算  
流水线周期为执行时间最长的一段。  
流水线计算公式为：  
一条指令执行时间+(指令条数-1)*流水线周期  
1. 理论公式：(t1+t2+...+tk)+(n-1)*T  
2. 实践公式：K*T+(n-1)T

例子：  
一条指令的执行过程可以分解为取值、分析和执行散步，在取值时间为3T，分析时间为2T，执行时间为4T的情况下，按串行方式执行，十条指令全部执行完需要90T；若按流水线方式执行，流水线周期为4T，十条指令执行完需要45T。

理论公式是执行完取值的操作后就开始处理下一步的取值操作；而实践公式是按流水线周期执行每一步，周期结束后开始下一步操作。

超标量流水线  
流水线的并行执行数为流水线的度

流水线的吞吐率  
吞吐率是指在单位时间内流水线完成的任务数量或输出结果的数量：  
TP=指令条数/流水线执行时间  

流水线最大吞吐率：  
TPmax=1/T  

存储设备的层次结构  
![](https://a-photo-store.oss-cn-beijing.aliyuncs.com/in-posts/2020-07-13-memory.png)

按小了划分就是：  
CPU寄存器  
Cache  
内存(主存)  
外存(辅存)

局部性原理是层次化存储结构的支撑。

Cache  
在计算机中，Cache是访问速度仅次于寄存器的层次。  
使用Cache改善系统性能的依据是程序的局部性原理。  
如果以h代表Cache的访问命中率(正好访问数据在Cache里)，t1表示Cache的周期时间，t2表示主存储器周期时间，以读操作为例，使用Cache+主存储器的系统平均周期为t3，则：  
t3=h*t1+(1-h)*t2   
其中，(1-h)又称为失效率(未命中率)

Cache映像  
直接相恋映像：硬件电路较简单，但冲突率很高。  
全相联映像：电路难于设计与实现，冲突率较低。  
组相联映像：直接相联与全相联的折中。

地址映像是将主存与Cache的存储空间划分成若干大小相同的页(或称为块)。  
例如，某机的主存容量为1GB，划分为2048页，每页512KB；Cache容量为8MB划分为16页，每页512KB。

直接相联  
7位存主存标记，4位存Cache页号，19位存页内地址，前两个为主存页号，后两个为Cache地址。
Cache的0页只能存主存0页的数据，访问最快，冲突率高。

全相联   
11位存主存页标记(主存页号)，19位存页内地址。  






